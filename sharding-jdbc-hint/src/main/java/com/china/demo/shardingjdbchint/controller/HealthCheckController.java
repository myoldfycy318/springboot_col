package com.china.demo.shardingjdbchint.controller;import com.china.demo.shardingjdbchint.entity.Order;import com.china.demo.shardingjdbchint.entity.OrderItem;import com.china.demo.shardingjdbchint.repository.OrderItemRepository;import com.china.demo.shardingjdbchint.repository.OrderRepository;import io.shardingsphere.api.HintManager;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.bind.annotation.RestController;import java.util.ArrayList;import java.util.List;/** * HealthCheckController * * @author shanmin.zhang * @date 19/4/23 **/@RestController@RequestMapping("/health")public class HealthCheckController {    @Autowired    private OrderItemRepository orderItemRepository;    @Autowired    private OrderRepository orderRepository;    @RequestMapping("check")    public String ok() {        List<Long> result = new ArrayList<>(10);        for (int i = 1; i <= 10; i++) {            Order order = new Order();            order.setUserId(i);            order.setStatus("INSERT_TEST");            HintManager hintManager = HintManager.getInstance();            hintManager.addDatabaseShardingValue("demo_ds_", i);            orderRepository.insert(order);            OrderItem item = new OrderItem();            item.setOrderId(order.getOrderId());            item.setUserId(i);            item.setStatus("INSERT_TEST");            orderItemRepository.insert(item);            hintManager.close();            result.add(order.getOrderId());        }        printDataAll();        return "ok";    }    private void printDataAll() {        System.out.println("---------------------------- Print Order Data -----------------------");        for (Object each : orderRepository.selectAll()) {            System.out.println(each);        }        System.out.println("---------------------------- Print OrderItem Data -------------------");        for (Object each : orderItemRepository.selectAll()) {            System.out.println(each);        }    }}