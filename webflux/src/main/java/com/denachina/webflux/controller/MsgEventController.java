package com.denachina.webflux.controller;import com.denachina.webflux.pojo.MsgEvent;import com.denachina.webflux.service.MsgEventService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.http.MediaType;import org.springframework.web.bind.annotation.*;import reactor.core.publisher.Flux;import reactor.core.publisher.Mono;/** * MsgEventController * * @author shanmin.zhang * @date 18/12/7 **/@RestController@RequestMapping("msgEvent")public class MsgEventController {    @Autowired    private MsgEventService msgEventService;    /**     * 消费application/stream+json格式的数据流，     */    @PostMapping(value = "", consumes = MediaType.APPLICATION_STREAM_JSON_VALUE)    public Mono<Void> loadMsgEvents(@RequestBody Flux<MsgEvent> msgEventFlux) {        return msgEventService.loads(msgEventFlux);    }    @GetMapping(value = "{username}", produces = MediaType.APPLICATION_STREAM_JSON_VALUE)    public Flux<MsgEvent> getMsgEvents(@PathVariable String username) {        return msgEventService.tailMsgEventsByUsername(username);    }}