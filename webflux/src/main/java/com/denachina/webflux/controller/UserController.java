package com.denachina.webflux.controller;import com.denachina.webflux.pojo.User;import com.denachina.webflux.service.UserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.http.MediaType;import org.springframework.web.bind.annotation.*;import reactor.core.publisher.Flux;import reactor.core.publisher.Mono;import java.time.Duration;/** * UserController * * @author shanmin.zhang * @date 18/12/6 **/@RestController@RequestMapping("user")public class UserController {    @Autowired    private UserService userService;    @PostMapping("")    public Mono<User> save(@RequestBody User user) {        return this.userService.save(user);    }    @DeleteMapping("/{username}")    public Mono<Long> deleteByUsername(@PathVariable String username) {        return this.userService.deleteByUsername(username);    }    /**     * 响应式流，每间隔一秒发送一条数据（SSE）     *     * @return     */    @GetMapping(value = "", produces = MediaType.APPLICATION_STREAM_JSON_VALUE)    public Flux<User> findAll() {        return this.userService.findAll().delayElements(Duration.ofSeconds(1L));    }}